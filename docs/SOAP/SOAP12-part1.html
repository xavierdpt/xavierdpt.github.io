<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="SOAP 1.2 - Part 1 | Xavier's Treasure Trove">
<title>SOAP 1.2 - Part 1 | Xavier's Treasure Trove</title>
<style>
*, *::before { box-sizing:border-box;}
a { text-decoration:none;  }
th, td { text-align:left; }
p { margin-top:0; margin-bottom:0;  }
p > code, li > code, td > code { font-size:1.05em; color:#660000; }
code.bnf-token-abstract { border: solid 1px #660000; display:inline-block; padding:5px; font-weight:bold; }
code.bnf-token-metasyntax { border: solid 1px #660000; display:inline-block; padding:5px; }
code.bnf-token-concrete { border-top: solid 1px #660000; border-bottom: solid 1px #660000; display:inline-block;}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/languages/xml.min.js"></script>
</head>
<body>
<a href="../index.html">Home</a>
<h1>SOAP 1.2 - Part 1</h1>
<p><a href="https://www.w3.org/TR/soap12-part1/" target="_blank" rel="nofollow">SOAP Version 1.2 Part 1: Messaging Framework (Second Edition)<img src="../assets/images/link-external-small-ltr-progressive.svg"></a></p>
<h2>1</h2>
<p>XMLP Requirements</p>
<p>MEP: Message Exchange Pattern</p>
<p>SOAP 1.2 defines things for two MEPs.</p>
<p>The SOAP 1.2 specification has three parts.</p>
<p>SOAP processing model</p>
<p>SOAP extensibility model: features and modules</p>
<p>SOAP protocol binding framework</p>
<p>SOAP Message Construct</p>
<p>TODO link: SOAP 1.2 Primer</p>
<h2>1.1</h2>
<p>Namespace prefix <code>env</code> for <code>"http://www.w3.org/2003/05/soap-envelope"</code></p>
<p>Namespace prefix <code>xs</code> for <code>"http://www.w3.org/2001/XMLSchema"</code></p>
<p>Schema for <code>env</code> at <a href="https://www.w3.org/2003/05/soap-envelope/" target="_blank" rel="nofollow">https://www.w3.org/2003/05/soap-envelope/<img src="../assets/images/link-external-small-ltr-progressive.svg"></a></p>
<h2>1.2</h2>
<p>Omitted</p>
<h2>1.3</h2>
<p>XML, XML Schema, XML Namespaces, XML Base</p>
<p>XML Schema describes some attributes types which can have multiple lexical forms; for example, "1" and "true" means the same thing for booleans.</p>
<p>Media type: <code>application/soap+xml</code></p>
<h2>1.3.1</h2>
<p>Omitted</p>
<h2>1.4</h2>
<p>Example SOAP message</p>
<pre><code class="language-xml hljs">&lt;env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope"&gt;
 &lt;env:Header&gt;
  &lt;n:alertcontrol xmlns:n="http://example.org/alertcontrol"&gt;
   &lt;n:priority&gt;1&lt;/n:priority&gt;
   &lt;n:expires&gt;2001-06-22T14:00:00-05:00&lt;/n:expires&gt;
  &lt;/n:alertcontrol&gt;
 &lt;/env:Header&gt;
 &lt;env:Body&gt;
  &lt;m:alert xmlns:m="http://example.org/alert"&gt;
   &lt;m:msg&gt;Pick up Mary at school at 2pm&lt;/m:msg&gt;
  &lt;/m:alert&gt;
 &lt;/env:Body&gt;
&lt;/env:Envelope&gt;
</code></pre>
<h2>1.5</h2>
<h2>1.5.1</h2>
<ul>
<li>SOAP</li>
<li>SOAP node</li>
<li>SOAP role</li>
<li>SOAP binding</li>
<li>SOAP feature</li>
<li>SOAP module</li>
<li>SOAP Message Exchange Pattern (MEP)</li>
<li>SOAP application</li>
</ul>
<h2>1.5.2</h2>
<ul>
<li>SOAP message</li>
<li>SOAP envelope</li>
<li>SOAP header</li>
<li>SOAP header block</li>
<li>SOAP body</li>
<li>SOAP fault</li>
</ul>
<h2>1.5.3</h2>
<ul>
<li>SOAP sender</li>
<li>SOAP receiver</li>
<li>SOAP message path</li>
<li>Initial SOAP sender</li>
<li>SOAP intermediary</li>
<li>Ultimate SOAP receiver</li>
</ul>
<h2>2</h2>
<h2>2.1</h2>
<p>SOAP nodes are identified by URIs</p>
<h2>2.2</h2>
<p>A SOAP node can act in one or more roles, each roles is identified by an URI.</p>
<p>Role names with special signifiance: next, none, ultimateReceiver.</p>
<p>Full role names are prefixed with <code>http://www.w3.org/2003/05/soap-envelope/role/</code></p>
<h2>2.3</h2>
<p><code>role</code> attribute for header blocks.</p>
<h2>2.4</h2>
<p><code>mustUnderstand</code> attribute on header blocks.</p>
<p>A node that doesn't understand a <code>mustUnderstand</code> header block must generate a fault when the header block is targetted at that node.</p>
<h2>2.5</h2>
<p>...</p>
<h2>2.6</h2>
<p>...</p>
<h2>2.7</h2>
<h2>2.7.1</h2>
<p><code>relay</code> attribute</p>
<p>When a header block is understood, it may be forwarded according to semantics of that header block.</p>
<p>When a header block is not understood, it will be forwarded when the node is not targeted, or the node is targeted but does not understand it and <code>relay</code> is true.</p>
<h2>2.7.2</h2>
<h2>2.7.2.1</h2>
<p>Rules and provisions for REC-xml-c14n-20010315</p>
<h2>2.7.3</h2>
<p>Active intermediaries can transform the SOAP messages in arbitrary ways before forwarding them.</p>
<h2>2.8</h2>
<p><code>Envelope</code> element in namespace <code>http://www.w3.org/2003/05/soap-envelope</code></p>
<p>Faults <code>env:VersionMismatch</code> or <code>env:Sender</code>.</p>
<h2>3</h2>
<h2>3.1</h2>
<p>SOAP header blocks</p>
<p>Features are named with URIs</p>
<h2>3.1.1</h2>
<h2>3.2</h2>
<p>MEPs are named with URIs</p>
<p>MEPs are features</p>
<p>MEPs apply to features which involve multiple messages (request/response/causality)</p>
<p>Protocol binding specification can declare support for some MEPs</p>
<h2>3.3</h2>
<p>SOAP modules includes one or more features or MEPs</p>
<p>SOAP modules are identified by URIs</p>
<p>SOAP modules declare which features they use</p>
<h2>4</h2>
<p>HTTP binding in SOAP part 2</p>
<h2>4.1</h2>
<p>...</p>
<h2>4.2</h2>
<p>A binding must enable one or more MEPs</p>
<p>When bindings support multiple features, they must describe how these futures will be combined together</p>
<h2>5</h2>
<p>No DTD, no notations, no unparsed entities.</p>
<p>SOAP <code>Envelope</code> element</p>
<p>No processing information items, receivers should reply with a fault with code <code>env:Sender</code></p>
<p>Only whitespace is allowed as character information item surrounding the element.</p>
<p>Comments are allowed, but not before or after the element information item.</p>
<h2>5.1</h2>
<p><code>env:Envelope</code></p>
<p><code>env</code> = <code>"http://www.w3.org/2003/05/soap-envelope"</code>.</p>
<p>Namespace-qualified attributes are allowed.</p>
<p>Optional <code>Header</code> element information item.</p>
<p>Mandatory <code>Body</code> element information item.</p>
<h2>5.1.1</h2>
<p><code>env:encodingStyle</code> of type <code>xs:anyURI</code></p>
<p>Allowed on header block and descendants, children of <code>Body</code> that are not SOAP Faults an descendants, children of SOAP Detail.</p>
<p>Default value when unspecified:</p>
<p><code>"http://www.w3.org/2003/05/soap-envelope/encoding/none"</code></p>
<h2>5.2</h2>
<p><code>env:Header</p>
<p>Namespace-qualified attributes and child elements allowed</p>
<p>Children of env:Header are SOAP header blocks</p>
<h2>5.2.1</h2>
<p>SOAP header blocks must be namespace-qualified.</p>
<p>May contain character information item, in which whitespace is considered significant</p>
<p>Children elements do not need to be namespace-qualified.</p>
<p>Allowed SOAP-related attributes: <code>encodingStyle</code>, <code>role</code>, <code>mustUnderstand</code>, <code>relay</code>.</p>
<h2>5.2.2</h2>
<p><code>env:role</code> attribute, of type <code>xs:anyURI</code>.</p>
<p>Default value when unspecified: <code>"http://www.w3.org/2003/05/soap-envelope/role/ultimateReceiver"</code></p>
<h2>5.2.3</h2>
<p><code>env:mustUnderstand</code> attribute of type <code>xs:boolean</code></p>
<p>Default value when unspecified: <code>"false"</code></p>
<p>SOAP intermediaries can convert "0" to "false", "1" to "true" and omit the attribute when its value is "false" or "0".</p>
<h2>5.2.4</h2>
<p><code>env:relay</code> attribute of type <code>xs:boolean</code></p>
<p>Default value when unspecified: "false".</p>
<h2>5.3</h2>
<p><code>env:Body</code> element</p>
<p>Namespace-qualified attributes and elements allowed.</p>
<p>Body may characters, and if so these characters must be whitespace and are considered significant.</p>
<h2>5.3.1</h2>
<p>Child elements of <code>Body</code> should be namespace-qualified.</p>
<p>Child elements of <code>Body</code> may have characters, in which whitespace characters is considered significant</p>
<p>Child elements of <code>Body</code> may be qualified</p>
<p>Child elements of <code>Body</code> may have a <code>env:encodingStyle</code> attribute.</p>
<h2>5.4</h2>
<p><code>env:Fault</code> element</p>
<p>Mandatory <code>Code</code> and <code>Reason</code> elements</p>
<p>Optional <code>Node</code>, <code>Role</code> and <code>Detail</code> elements.</p>
<p>A SOAP error message must have a single <code>Fault</code> element.</p>
<h2>5.4.1</h2>
<p><code>env:Code</code> element</p>
<p>Mandatory <code>Value</code> element.</p>
<p>Optional <code>Subcode</code> element.</p>
<h2>5.4.1.1</h2>
<p><code>env:Value</code> element child of <code>Code</code> of type <code>env:faultCodeEnum</code></p>
<h2>5.4.1.2</h2>
<p><code>env:Subcode</code> element</p>
<p>Mandatory <code>Value</code> element.</p>
<p>Optional <code>Subcode</code> element.</p>
<h2>5.4.1.3</h2>
<p><code>env:Value</code> element child of <code>Subcode</code> of type <code>xs:QName</code></p>
<h2>5.4.2</h2>
<p><code>env:Reason</code></p>
<p>Several <code>Text</code> elements with different <code>xml:lang</code> attributes.</p>
<p>Type of <code>Reason</code> is <code>env:faultReason</code></p>
<h2>5.4.2.1</h2>
<p><code>env:Text</code> element with mandatory <code>xml:lang</code> attribute and character content with significant whitespace.</p>
<p>Type of <code>Text</code> is <code>env:reasonText</code></p>
<p>Similar to HTTP 1.1 <code>Reason-Phrase</code></p>
<h2>5.4.3</h2>
<p><code>env:Node</code> element of type <code>xs:anyURI</code></p>
<p>Identifies the node that generated the fault.</p>
<p>Intermediaries must include this information when generating the fault, ultimate receivers need not include this information.</p>
<h2>5.4.4</h2>
<p><code>env:Role</code> element of type <code>xs:anyURI</code></p>
<h2>5.4.5</h2>
<p><code>env:Detail</code> element.</p>
<p>May have whitespace characters, which are considered significant.</p>
<h2>5.4.5.1</h2>
<p>Children of <code>Detail</code> are cause Detail Entries and may be namespace-qualified</p>
<p>Detail entries can have characters or elements, and attributes.</p>
<p><code>encodingStyle</code> is allowed.</p>
<h2>5.4.6</h2>
<p>SOAP Fault Codes are XML expanded names.</p>
<p>Values of <code>Value</code> for the <code>Code</code> element are restricted.</p>
<p>The interpretation of a <code>Detail</code> element is conditioned by the Code and the Subcodes.</p>
<ul>
<li><code>VersionMismatch</code></li>
<li><code>MustUnderstand</code></li>
<li><code>DataEncodingUnknown</code></li>
<li><code>Sender</code></li>
<li><code>Receiver</code></li>
</ul>
<p><code>Sender</code> fault code indicates that the message needs to be modified to succeed, <code>Receiver</code> fault code indicates that the message may succeed if sent again later</p>
<h2>5.4.7</h2>
<p>Messages with a <code>VersionMismatch</code> fault code should include a <code>Upgrade</code> SOAP header block which indicates the SOAP envelopes that the SOAP node supports.</p>
<h2>5.4.7.1</h2>
<p><code>env:Upgrade</code> header block with <code>SupportedEnvelope</code> child elements.</p>
<p><code>encodingStyle</code> not allowed on <code>Upgrade</code> header blocks.</p>
<h2>5.4.7.2</h2>
<p><code>env:SupportedEnvelope</code> element with a <code>qname</code> attribute.</p>
<h2>5.4.7.3</h2>
<p><code>qname</code> attribute with no namespace and of type <code>xs:QName</code></p>
<p>Contains the XML qualified name of a SOAP Envelope element that the faulting node can understand.</p>
<p>The namespace is specified with a name introduced with <code>xmlns:</code> on the attribute, and the local name is <code>Envelope</code></p>
<h2>5.4.7.4</h2>
<p>Example</p>
<h2>5.4.8</h2>
<p>Faults with code value <code>mustUnderstand</code> should include a <code>NotUnderstood</code> header block.</p>
<h2>5.4.8.1</h2>
<p><code>env:NotUnderstood</code> header block element with <code>qname</code> attribute and <code>encodingStyle</code> attribute disallowed.</p>
<h2>5.4.8.2</h2>
<p><code>qname</code> attribute of type <code>xs:QName</code> which contains the XML qualified name of a SOAP header block that was not understood.</p>
<h2>5.4.8.3</h2>
<p>Example.</p>
<p>The fault message may include multiple <code>NotUnderstood</code> header blocks.</p>
<h2>6</h2>
<p>IP addresses in URIs are discouraged but if IPv4 addresses are supported, IPv6 addresses should be supported too.</p>
<h2>7</h2>
<p>Security.</p>
<h2>7.1</h2>
<h2>7.2</h2>
<h2>7.3</h2>
<h2>7.3.1</h2>
<h2>8</h2>
<p>References</p>
<h2>8.1</h2>
<h2>8.2</h2>
<h2>A</h2>
<p>Transition from SOAP/1.1 to SOAP Version 1.2</p>
<p>SOAP/1.1 nodes receiving SOAP Version 1.2 messages will generate a version mismatch fault based on a SOAP/1.1 message construct.</p>
<p>A SOAP Version 1.2 node receiving a SOAP/1.1 message may generate a fault if choosing not to support SOAP/1.1</p>
<p>If so, they should generate a SOAP/1.1 fault so that the SOAP/1.1 sender can correctly interpret it.</p>
<h2>B</h2>
<p>Acknowledgments</p>
<p><a href="https://www.w3.org/TR/soap12-part2/" target="_blank" rel="nofollow">SOAP Version 1.2 Part 2: Adjuncts (Second Edition)<img src="../assets/images/link-external-small-ltr-progressive.svg"></a></p>
<p><a href="https://www.w3.org/TR/soap12-part3/" target="_blank" rel="nofollow">SOAP 1.2 Part 3: One-Way MEP<img src="../assets/images/link-external-small-ltr-progressive.svg"></a></p>
<script>hljs.highlightAll();</script>
</body>
</html>
