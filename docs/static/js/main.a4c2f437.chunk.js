(this["webpackJsonpxavierdpt.github.io"]=this["webpackJsonpxavierdpt.github.io"]||[]).push([[0],{13:function(t,e,n){},14:function(t,e,n){},16:function(t,e,n){"use strict";n.r(e);var r=n(1),i=n.n(r),o=n(3),l=n.n(o),c=(n(13),n(7)),s=n(4),a=n(5),u=n(8),d=n(6),h=(n(14),n(0)),f=[[-1,0],[0,1],[1,0],[0,-1]],b=function(t){return Array.from({length:t},(function(){return{WHITE:void 0,BLACK:void 0}}))},g=function(t){return{width:2*t+1,height:2*t+1}},v=function(t,e){for(var n=g(t),r=n.width,i=n.height,o=Array.from({length:r},(function(){return Array.from({length:i},(function(){return{color:0,pristine:!0}}))})),l=0;l<e;++l){for(var c=2*l;c<r-2*l;++c)o[c][2*l].color=1,o[c][i-1-2*l].color=1;for(var s=2*l;s<i-2*l;++s)o[2*l][s].color=1,o[r-1-2*l][s].color=1}return{instruction:0,count:0,x:t+1,y:t+1,grid:o}},p=[],j=null,m=function(t){for(var e=[],n=0,r=[0,1,2,3];n<r.length;n++)for(var i=r[n],o=0,l=[1,0];o<l.length;o++)for(var c=l[o],s=0;s<t;++s)e.push({direction:i,color:c,instruction:s});return p=[],j=null,e},x=null,O=null,S=null,C=[],y="123456789ABCDEF".split("").map((function(t){return"#".concat(t).concat(t).concat(t).concat(t).concat(t).concat(t)})),z="INSTRUCTIONS_EXHAUSTED",w=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(t){var r;return Object(s.a)(this,n),(r=e.call(this,t)).start=function(){var t=r.state,e=t.gridSize,n=t.instructions,i=t.instructionsSteps,o=t.numberOfOuterWalls,l=t.cellSize,c=g(e),s=c.width,a=c.height;x=b(n),O=v(e,o),S=m(n);var u=r.getContext();u.fillStyle="black";for(var d=0;d<s;++d)for(var h=0;h<a;++h)1===O.grid[d][h].color&&u.fillRect(d*l,h*l,l,l);r.setState({context:u,intervalHandle:setInterval((function(){return r.steps(i)}),1)})},r.stop=function(t){var e=r.state,n=e.intervalHandle,i=e.pauseHandle;n?(clearInterval(n),r.setState({intervalHandle:null},t)):i&&(clearTimeout(i),r.setState({pauseHandle:null}))},r.steps=function(t){for(var e=r.state,n=e.cellSize,i=e.pauseDuration,o=e.context,l={},c=!1,s=!1,a=0;a<t;++a){var u=r.step();if(u.cell&&(l["".concat(u.cell.x,"-").concat(u.cell.y)]=u.cell),u.stopped){c=!0,s=u.instructionsExhausted;break}}for(var d in l){var h=l[d].x,f=l[d].y,b=l[d].colorToWrite;o.fillStyle=1===b?"black":"white",o.fillRect(h*n,f*n,n,n)}c&&r.stop((function(){r.setState({pauseHandle:setTimeout((function(){r.setState({pauseHande:null},(function(){r.nextProgram(s),r.start()}))}),i)})}))},r.step=function(){var t=r.state,e=t.generateRandomActions,n=t.gridSize,i=t.maxInstructionCount,o=O,l=o.instruction,c=o.x,s=o.y,a=o.grid,u=g(n),d=u.width,h=u.height,b=a[c][s].color,v=x[l][b];if(void 0===v&&(v=function(t){if(t){var e=Math.floor(Math.random()*S.length);return S[e]}if(null===j&&(j=0),void 0===p[j])p.push(0);else{var n=!0;if(console.log(p),j<p.length-1)for(var r=j+1;r<p.length;++r)p[r]!==S.length-1&&(n=!1);else p[j]!==S.length-1&&(n=!1);if(n){if(0===j)return z;++p[j],p.splice(j+1)}else++p[j]}var i=S[p[j]];return++j,i}(e),x[l][b]=v),v===z)return{stopped:!0,cell:null,instructionsExhausted:!0};var m=c+f[v.direction][0],C=s+f[v.direction][1];if(m<0||m>=d||C<0||C>=h||O.count>i)return{stopped:!0,cell:null,instructionsExhausted:!1};var y=v.instruction,w=v.color;return a[c][s].color=w,a[c][s].pristine=!1,O.x=m,O.y=C,O.instruction=y,++O.count,{cell:{x:c,y:s,colorToWrite:w},stopped:!1,instructionsExhausted:!1}},r.nextProgram=function(t){var e=r.state,n=e.gridSize,i=e.cellSize,o=e.instructions,l=e.maxInstructionCount,s=e.numberOfOuterWalls,a=e.context,u=g(n),d=u.width,h=u.height,f=O.grid,p=function(t,e,n,r,i){for(var o=0,l=0;l<n;++l)for(var c=0;c<r;++c)t[l][c].pristine||++o;return o+(1-e/i)}(f,O.count,d,h,l),z=!1;if(0===C.length)z=!0;else{var w,I=Object(c.a)(C);try{for(I.s();!(w=I.n()).done;){w.value.score<p&&(z=!0)}}catch(W){I.e(W)}finally{I.f()}}if(z){console.log(JSON.stringify(x,null,2)),C.unshift({grid:f,score:p}),C.sort((function(t,e){return t.score===e.score?0:t.score<e.score?1:-1})),C.length>y.length&&C.splice(C.length-1),console.log("High scores"),console.group();for(var A="123456789ABCDEF".split(""),F=0;F<C.length;++F)console.log("".concat(A[F]," - ").concat(C[F].score));console.groupEnd()}a.fillStyle="white",a.fillRect(0,0,d*i,h*i);for(var H=C.length-1;H>=0;--H){var N=C[H].grid,k=y[H];a.fillStyle=k;for(var E=0;E<d;++E)for(var R=0;R<h;++R)N[E][R].pristine||a.fillRect(E*i,R*i,i,i)}t?(console.log("Switching to program with "+(o+1)+" instructions"),r.setState({instructions:o+1},(function(){var t=r.state,e=t.instructions,n=t.gridSize,i=t.numberOfOuterWalls;S=m(e),x=b(e),O=v(n,i),j=0}))):(x=b(o),O=v(n,s),j=0)},r.state={intervalHandle:null,pauseHandle:null,instructions:10,instructionsSteps:1,maxInstructionCount:1e4,pauseDuration:1,gridSize:150,cellSize:2,generateRandomActions:!0,numberOfOuterWalls:15,context:null},r}return Object(a.a)(n,[{key:"getContext",value:function(){return document.querySelector("#canvas").getContext("2d")}},{key:"render",value:function(){var t=this,e=this.state,n=e.intervalHandle,r=e.pauseHandle,i=e.instructions,o=e.instructionsSteps,l=e.maxInstructionCount,c=e.pauseDuration,s=e.gridSize,a=e.cellSize,u=e.generateRandomActions,d=e.numberOfOuterWalls,f=null!==n||null!==r,b=g(s),v=b.width,p=b.height;return Object(h.jsxs)("div",{className:"App",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"instructions",children:"Number of instructions"}),Object(h.jsx)("input",{name:"instructions",type:"number",value:i,disabled:f,onChange:function(e){return t.setState({instructions:Number(e.target.value)})}})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"maxInstructionCount",children:"Max instruction count"}),Object(h.jsx)("input",{name:"maxInstructionCount",type:"number",value:l,disabled:f,onChange:function(e){return t.setState({maxInstructionCount:Number(e.target.value)})}})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"instructionsSteps",children:"Instructions per step"}),Object(h.jsx)("input",{name:"instructionsSteps",type:"number",value:o,disabled:f,onChange:function(e){return t.setState({instructionsSteps:Number(e.target.value)})}})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"pauseDuration",children:"Pause between runs"}),Object(h.jsx)("input",{name:"pauseDuration",type:"number",value:c,disabled:f,onChange:function(e){return t.setState({pauseDuration:Number(e.target.value)})}})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"gridSize",children:"Grid size"}),Object(h.jsx)("input",{name:"gridSize",type:"number",value:s,disabled:f,onChange:function(e){return t.setState({gridSize:Number(e.target.value)})}})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"cellSize",children:"Cell size"}),Object(h.jsx)("input",{name:"cellSize",type:"number",value:a,disabled:f,onChange:function(e){return t.setState({cellSize:Number(e.target.value)})}})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("input",{type:"checkbox",name:"generateRandomActions",checked:u,onChange:function(e){return t.setState({generateRandomActions:e.target.checked})}}),Object(h.jsx)("label",{htmlFor:"generateRandomActions",children:"Generate random actions"})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"numberOfOuterWalls",children:"Number of outer walls"}),Object(h.jsx)("input",{name:"numberOfOuterWalls",type:"number",value:d,disabled:f,onChange:function(e){return t.setState({numberOfOuterWalls:Number(e.target.value)})}})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{disabled:f,onClick:this.start,children:"Start"}),Object(h.jsx)("button",{disabled:!f,onClick:function(){return t.stop()},children:"Stop"}),Object(h.jsx)("button",{disabled:f,onClick:this.nextProgram,children:"Next"})]}),Object(h.jsx)("div",{children:Object(h.jsx)("canvas",{id:"canvas",width:v*a,height:p*a})})]})}}]),n}(i.a.Component),I=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(e){var n=e.getCLS,r=e.getFID,i=e.getFCP,o=e.getLCP,l=e.getTTFB;n(t),r(t),i(t),o(t),l(t)}))};l.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(w,{})}),document.getElementById("root")),I()}},[[16,1,2]]]);
//# sourceMappingURL=main.a4c2f437.chunk.js.map