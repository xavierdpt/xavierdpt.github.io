(this["webpackJsonpxavierdpt.github.io"]=this["webpackJsonpxavierdpt.github.io"]||[]).push([[0],{13:function(t,e,n){},14:function(t,e,n){},16:function(t,e,n){"use strict";n.r(e);var r=n(1),i=n.n(r),o=n(3),c=n.n(o),s=(n(13),n(7)),l=n(4),a=n(5),u=n(8),d=n(6),h=(n(14),n(0)),f=[[-1,0],[0,1],[1,0],[0,-1]],b=function(t){return Array.from({length:t},(function(){return{WHITE:void 0,BLACK:void 0}}))},g=function(t){return{width:2*t+1,height:2*t+1}},v=function(t,e){for(var n=g(t),r=n.width,i=n.height,o=Array.from({length:r},(function(){return Array.from({length:i},(function(){return{color:0,pristine:!0}}))})),c=0;c<e;++c){for(var s=2*c;s<r-2*c;++s)o[s][2*c].color=1,o[s][i-1-2*c].color=1;for(var l=2*c;l<i-2*c;++l)o[2*c][l].color=1,o[r-1-2*c][l].color=1}return{instruction:0,count:0,x:t+1,y:t+1,grid:o}},p=[],j=0,m=function(t){for(var e=[],n=0,r=[0,1,2,3];n<r.length;n++)for(var i=r[n],o=0,c=[1,0];o<c.length;o++)for(var s=c[o],l=0;l<t;++l)e.push({direction:i,color:s,instruction:l});return e},x=["W","B"],S=["\ud83e\udc1e","\ud83e\udc1f","\ud83e\udc1c","\ud83e\udc1d"],O=null,y=null,C=null,k=[],z="123456789ABCDEF".split("").map((function(t){return"#".concat(t).concat(t).concat(t).concat(t).concat(t).concat(t)})),N="INSTRUCTIONS_EXHAUSTED",E=function(t){if(t){var e=Math.floor(Math.random()*C.length);return C[e]}if(void 0===p[j]){p[j]=0;var n=C[p[j]];return++j,n}for(var r=!0,i=j+1;i<p.length;++i)p[i]!==C.length-1&&(r=!1);if(r){if(0===j&&p[j]===C.length-1)return N;++p[j],p.splice(j+1);var o=C[p[j]];return++j,o}var c=C[p[j]];return++j,c},I=function(t){if(void 0===t)return!1;if(t===N)return!0;if(0===t.instruction)return!0;if(j<p.length)return!0;var e=O[t.instruction-1];return void 0!==e&&(void 0!==e[0]||void 0!==e[1])},F=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(t){var r;return Object(l.a)(this,n),(r=e.call(this,t)).start=function(){var t=r.state,e=t.gridSize,n=t.instructions,i=t.numberOfOuterWalls,o=t.cellSize,c=t.increaseSpeed,s=t.instructionsSteps,l=g(e),a=l.width,u=l.height;O=b(n),y=v(e,i),C=m(n);var d=r.getContext();d.fillStyle="darkgray";for(var h=0;h<a;++h)for(var f=0;f<u;++f)1===y.grid[h][f].color&&d.fillRect(h*o,f*o,o,o);r.setState({context:d,intervalHandle:setInterval((function(){var t=r.state.currentSpeed;r.setState({currentSpeed:null===t?s:c?t+1:t},(function(){var t=r.state.currentSpeed;r.steps(t)}))}),1)})},r.stop=function(t){var e=r.state,n=e.intervalHandle,i=e.pauseHandle;clearInterval(n),clearTimeout(i),r.setState({intervalHandle:null,pauseHandle:null},t)},r.steps=function(t){for(var e=r.state,n=e.cellSize,i=e.pauseDuration,o=e.context,c={},s=!1,l=!1,a=0;a<t;++a){var u=r.step();if(u.cell&&(c["".concat(u.cell.x,"-").concat(u.cell.y)]=u.cell),u.stopped){s=!0,l=u.instructionsExhausted;break}}for(var d in c){var h=c[d].x,f=c[d].y,b=c[d].colorToWrite;o.fillStyle=1===b?"black":"white",o.fillRect(h*n,f*n,n,n)}s&&r.stop((function(){r.setState({pauseHandle:setTimeout((function(){r.setState({pauseHande:null},(function(){r.nextProgram(l),r.start()}))}),i)})}))},r.step=function(){var t=r.state,e=t.generateRandomActions,n=t.gridSize,i=t.maxInstructionCount,o=y,c=o.instruction,s=o.x,l=o.y,a=o.grid,u=g(n),d=u.width,h=u.height,b=a[s][l].color,v=O[c][b];if(void 0===v){for(;!I(v);)v=E(e);O[c][b]=v}if(v===N)return{stopped:!0,cell:null,instructionsExhausted:!0};var p=s+f[v.direction][0],j=l+f[v.direction][1];if(p<0||p>=d||j<0||j>=h||y.count>i)return{stopped:!0,cell:null,instructionsExhausted:!1};var m=v.instruction,x=v.color;return a[s][l].color=x,a[s][l].pristine=!1,y.x=p,y.y=j,y.instruction=m,++y.count,{cell:{x:s,y:l,colorToWrite:x},stopped:!1,instructionsExhausted:!1}},r.nextProgram=function(t){var e=r.state,n=e.gridSize,i=e.cellSize,o=e.instructions,c=e.maxInstructionCount,l=e.numberOfOuterWalls,a=e.context,u=e.instructionsSteps,d=e.historyLength;console.log(JSON.stringify(p));var h=g(n),f=h.width,N=h.height,E=y.grid,I=function(t,e,n,r,i){for(var o=0,c=0;c<n;++c)for(var s=0;s<r;++s)t[c][s].pristine||++o;return o+(1-e/i)}(E,y.count,f,N,c),F=!1;if(0===k.length)F=!0;else{var H,w=Object(s.a)(k);try{for(w.s();!(H=w.n()).done;){H.value.score<I&&(F=!0)}}catch(M){w.e(M)}finally{w.f()}}if(F){console.log(function(t){for(var e="",n=!1,r=0;r<t.length;++r)for(var i=0,o=[0,1];i<o.length;i++){var c=o[i];if(n&&(e+=","),t[r]){var s=t[r][c];s?(e+=r,e+=x[c],e+=S[s.direction],e+=x[s.color],e+=s.instruction,n=!0):n=!1}}return e}(O)),k.unshift({grid:E,score:I}),k.sort((function(t,e){return t.score===e.score?0:t.score<e.score?1:-1})),k.length>Math.min(d,z.length)&&k.splice(k.length-1),console.log("High scores"),console.group();for(var A="123456789ABCDEF".split(""),R=0;R<k.length;++R)console.log("".concat(A[R]," - ").concat(k[R].score));console.groupEnd()}a.fillStyle="#EEEEEE",a.fillRect(0,0,f*i,N*i);for(var T=k.length-1;T>=0;--T){var W=k[T].grid,D=z[T];a.fillStyle=D,1===k.length&&(a.fillStyle="red");for(var L=0;L<f;++L)for(var B=0;B<N;++B)1===k.length?1===W[L][B].color&&a.fillRect(L*i,B*i,i,i):W[L][B].pristine||a.fillRect(L*i,B*i,i,i)}t?(console.log("Switching to program with "+(o+1)+" instructions"),r.setState({instructions:o+1,currentSpeed:u},(function(){var t=r.state,e=t.instructions,n=t.gridSize,i=t.numberOfOuterWalls;C=m(e),O=b(e),y=v(n,i),p.splice(j),j=0}))):r.setState({currentSpeed:u},(function(){O=b(o),y=v(n,l),p.splice(j),j=0}))},r.skipToNext=function(){var t=r.state.maxInstructionCount;y.count+=t},r.bestNotGood=function(){k.length>0&&k.pop()},r.state={intervalHandle:null,pauseHandle:null,instructions:10,instructionsSteps:1,maxInstructionCount:1e6,pauseDuration:1,gridSize:150,cellSize:2,generateRandomActions:!1,numberOfOuterWalls:0,context:null,increaseSpeed:!0,currentSpeed:null,historyLength:1},r}return Object(a.a)(n,[{key:"getContext",value:function(){return document.querySelector("#canvas").getContext("2d")}},{key:"render",value:function(){var t,e=this,n=this.state,r=n.intervalHandle,i=n.pauseHandle,o=n.instructions,c=n.instructionsSteps,s=n.maxInstructionCount,l=n.pauseDuration,a=n.gridSize,u=n.cellSize,d=n.generateRandomActions,f=n.numberOfOuterWalls,b=n.increaseSpeed,v=n.currentSpeed,p=n.historyLength,j=null!==r||null!==i,m=g(a),x=m.width,S=m.height;return Object(h.jsxs)("div",{className:"App",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"instructions",children:"Number of instructions"}),Object(h.jsx)("input",{min:1,name:"instructions",type:"number",value:o,disabled:j,onChange:function(t){return e.setState({instructions:Number(t.target.value)})}})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"maxInstructionCount",children:"Max instruction count"}),Object(h.jsx)("input",{min:1,name:"maxInstructionCount",type:"number",value:s,disabled:j,onChange:function(t){return e.setState({maxInstructionCount:Number(t.target.value)})}})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"instructionsSteps",children:"Instructions per step"}),Object(h.jsx)("input",{min:1,name:"instructionsSteps",type:"number",value:c,disabled:j,onChange:function(t){return e.setState({instructionsSteps:Number(t.target.value)})}})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("input",{type:"checkbox",name:"increaseSpeed",checked:b,onChange:function(t){return e.setState({increaseSpeed:t.target.checked})}}),Object(h.jsx)("label",{htmlFor:"increaseSpeed",children:"Increase speed"})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"pauseDuration",children:"Pause between runs"}),Object(h.jsx)("input",{min:1,name:"pauseDuration",type:"number",value:l,disabled:j,onChange:function(t){return e.setState({pauseDuration:Number(t.target.value)})}})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"gridSize",children:"Grid size"}),Object(h.jsx)("input",{min:0,name:"gridSize",type:"number",value:a,disabled:j,onChange:function(t){return e.setState({gridSize:Number(t.target.value)})}})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"cellSize",children:"Cell size"}),Object(h.jsx)("input",{min:0,name:"cellSize",type:"number",value:u,disabled:j,onChange:function(t){return e.setState({cellSize:Number(t.target.value)})}})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("input",{type:"checkbox",name:"generateRandomActions",checked:d,onChange:function(t){return e.setState({generateRandomActions:t.target.checked})}}),Object(h.jsx)("label",{htmlFor:"generateRandomActions",children:"Generate random actions"})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"numberOfOuterWalls",children:"Number of outer walls"}),Object(h.jsx)("input",{min:0,name:"numberOfOuterWalls",type:"number",value:f,disabled:j,onChange:function(t){return e.setState({numberOfOuterWalls:Number(t.target.value)})}})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"historyLength",children:"History length"}),Object(h.jsx)("input",{name:"historyLength",type:"number",value:p,disabled:j,max:z.length,min:0,onChange:function(t){return e.setState({historyLength:Number(t.target.value)})}})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{disabled:j,onClick:this.start,children:"Start"}),Object(h.jsx)("button",{disabled:!j,onClick:function(){return e.stop()},children:"Stop"}),Object(h.jsx)("button",{disabled:!j,onClick:function(){return e.skipToNext()},children:"Skip to next"}),Object(h.jsx)("button",{onClick:function(){return e.bestNotGood()},children:"Best is not good"})]}),Object(h.jsxs)("div",{children:["Current speed: ",v]}),Object(h.jsxs)("div",{children:["Current count: ",null===(t=y)||void 0===t?void 0:t.count]}),Object(h.jsx)("div",{children:Object(h.jsx)("canvas",{id:"canvas",width:x*u,height:S*u})})]})}}]),n}(i.a.Component),H=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(e){var n=e.getCLS,r=e.getFID,i=e.getFCP,o=e.getLCP,c=e.getTTFB;n(t),r(t),i(t),o(t),c(t)}))};c.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(F,{})}),document.getElementById("root")),H()}},[[16,1,2]]]);
//# sourceMappingURL=main.787f3be9.chunk.js.map